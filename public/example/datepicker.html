<div class="m13">
    <h1>日历 <small>Calendar</small></h1>
    <hr>
    <link rel="stylesheet" href="css/calendar.css">
    <div class="calendar" id="calendar">
        <div class="calendar-h text-center">
            <span class="b xl ac-prev"><i class="f f-left"></i></span>
            <span class="b xr ac-next"><i class="f f-right"></i></span>
            <strong class="b">2015-12</strong>
        </div>
        <div class="calendar-b">
            <table>
                <thead>
                    <tr>
                        <th>一</th>
                        <th>二</th>
                        <th>三</th>
                        <th>四</th>
                        <th>五</th>
                        <th>六</th>
                        <th>日</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>30</td>
                        <td class="on">1</td>
                        <td class="on today">
                            <span class="tip"></span> 2
                        </td>
                        <td class="on">3</td>
                        <td class="on">4</td>
                        <td class="on active">5</td>
                        <td class="on">6</td>
                    </tr>
                    <tr>
                        <td class="on">7</td>
                        <td class="on">8</td>
                        <td class="on">9</td>
                        <td class="on">10</td>
                        <td class="on">11</td>
                        <td class="on">12</td>
                        <td class="on">13</td>
                    </tr>
                    <tr>
                        <td class="on">14</td>
                        <td class="on">15</td>
                        <td class="on">16</td>
                        <td class="on">17</td>
                        <td class="on">18</td>
                        <td class="on">19</td>
                        <td class="on">20</td>
                    </tr>
                    <tr>
                        <td class="on">21</td>
                        <td class="on">22</td>
                        <td class="on">23</td>
                        <td class="on">24</td>
                        <td class="on">25</td>
                        <td class="on">26</td>
                        <td class="on">27</td>
                    </tr>
                    <tr>
                        <td class="on">28</td>
                        <td class="on">29</td>
                        <td class="on">30</td>
                        <td class="on">31</td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td class="disabled">5</td>
                        <td class="disabled">6</td>
                        <td class="disabled">7</td>
                        <td class="disabled">8</td>
                        <td class="disabled">9</td>
                        <td class="disabled">10</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="footman"></div>
    <h2>选年</h2>
    <div class="calendar">
        <div class="calendar-h text-center">
            <span class="b xr ac-next"><i class="f f-right"></i></span>
            <span class="b xl ac-prev"><i class="f f-left"></i></span>
            <strong class="b">1915-1938</strong>
        </div>
        <div class="calendar-b">
            <table>
                <tbody>
                    <tr>
                        <td class="on">1915</td>
                        <td class="on">1916</td>
                        <td class="on">1917</td>
                        <td class="on">1918</td>
                    </tr>
                    <tr>
                        <td class="on">1919</td>
                        <td class="on">1920</td>
                        <td class="on">1921</td>
                        <td class="on">1922</td>
                    </tr>
                    <tr>
                        <td class="on">1923</td>
                        <td class="on">1924</td>
                        <td class="on">1925</td>
                        <td class="on">1926</td>
                    </tr>
                    <tr>
                        <td class="on">1927</td>
                        <td class="on active">1928</td>
                        <td class="on">1929</td>
                        <td class="on">1930</td>
                    </tr>
                    <tr>
                        <td class="on">1931</td>
                        <td class="on">1932</td>
                        <td class="on">1933</td>
                        <td class="on">1934</td>
                    </tr>
                    <tr>
                        <td class="on">1935</td>
                        <td class="on">1936</td>
                        <td class="on">1937</td>
                        <td class="on">1938</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <h2>选月</h2>
    <div class="calendar">
        <div class="calendar-h text-center">
            <span class="b xl ac-prev"><i class="f f-left"></i></span>
            <span class="b xr ac-next"><i class="f f-right"></i></span>
            <strong class="b">2015</strong>
        </div>
        <div class="calendar-b">
            <table>
                <tbody>
                    <tr>
                        <td class="on">1月</td>
                        <td class="on">2月</td>
                    </tr>
                    <tr>
                        <td class="on">3月</td>
                        <td class="on">4月</td>
                    </tr>
                    <tr>
                        <td class="on">5月</td>
                        <td class="on">6月</td>
                    </tr>
                    <tr>
                        <td class="on">7月</td>
                        <td class="on">8月</td>
                    </tr>
                    <tr>
                        <td class="on">9月</td>
                        <td class="on">10月</td>
                    </tr>
                    <tr>
                        <td class="on">11月</td>
                        <td class="on">12月</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <h2>选时间，仅供观赏</h2>
    <div class="calendar">
        <div class="calendar-h text-center">
            <span class="b xl ac-prev"><i class="f f-close"></i></span>
            <span class="b xr ac-next c-safe"><i class="f f-done"></i></span>
            <strong class="b">08:00:00</strong>
        </div>
        <div class="calendar-b">
            <table>
                <thead>
                    <tr>
                        <th>凌晨</th>
                        <th>上午</th>
                        <th>下午</th>
                        <th>晚上</th>
                        <th>:</th>
                        <th>分钟</th>
                        <th>:</th>
                        <th>秒</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="on">00</td>
                        <td class="on">06</td>
                        <td class="on">12</td>
                        <td class="on">18</td>
                        <th></th>
                        <td class="on active">00</td>
                        <th></th>
                        <td class="on active">00</td>
                    </tr>
                    <tr>
                        <td class="on">01</td>
                        <td class="on">07</td>
                        <td class="on">13</td>
                        <td class="on">19</td>
                        <th></th>
                        <td class="on">10</td>
                        <th></th>
                        <td class="on">10</td>
                    </tr>
                    <tr>
                        <td class="on">02</td>
                        <td class="on active">08</td>
                        <td class="on">14</td>
                        <td class="on">20</td>
                        <th></th>
                        <td class="on">20</td>
                        <th></th>
                        <td class="on">20</td>
                    </tr>
                    <tr>
                        <td class="on">03</td>
                        <td class="on">09</td>
                        <td class="on">15</td>
                        <td class="on">21</td>
                        <th></th>
                        <td class="on">30</td>
                        <th></th>
                        <td class="on">30</td>
                    </tr>
                    <tr>
                        <td class="on">04</td>
                        <td class="on">10</td>
                        <td class="on">16</td>
                        <td class="on">22</td>
                        <th></th>
                        <td class="on">40</td>
                        <th></th>
                        <td class="on">40</td>
                    </tr>
                    <tr>
                        <td class="on">05</td>
                        <td class="on">11</td>
                        <td class="on">17</td>
                        <td class="on">23</td>
                        <th></th>
                        <td class="on">50</td>
                        <th></th>
                        <td class="on">50</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <b class="xr b m1 note">确定</b>
    </div>
</div>
<div class="footman"></div>
<script>
//使用责任联模式
//选择日期模式下：点击顶部的日期进入月选择
//再次点击进入年选择
var calendar = UI({
    el: $('#calendar'),
    //时间跨度，默认前后一百年
    yearSpan: 100,
    //年
    year: null,
    //月
    month: null,
    //日
    day: null,
    months: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
    weekdays: '日_一_二_三_四_五_六'.split('_'),
    //默认格式
    format: 'YYYY-MM-dd',
    //一周的开始日，习惯可能来自基督教,周日是主日
    weekStartDay: 0,
    //解析时间字符串
    parse: function(dateStr, formatStr) {
        return new Date(dateStr);
    },
    /**
     * 对Date的扩展，将 Date 转化为指定格式的String
     * 月(M)、日(d)、12小时(h)、24小时(H)、分(m)、秒(s)、周(E)、季度(q) 可以用 1-2 个占位符
     * 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)
     * eg:
     * Utils.formatDate(new Date(),'yyyy-MM-dd') ==> 2014-03-02
     * Utils.formatDate(new Date(),'yyyy-MM-dd hh:mm') ==> 2014-03-02 05:04
     * Utils.formatDate(new Date(),'yyyy-MM-dd HH:mm') ==> 2014-03-02 17:04
     * Utils.formatDate(new Date(),'yyyy-MM-dd hh:mm:ss.S') ==> 2006-07-02 08:09:04.423
     * Utils.formatDate(new Date(),'yyyy-MM-dd E HH:mm:ss') ==> 2009-03-10 äºŒ 20:09:04
     * Utils.formatDate(new Date(),'yyyy-MM-dd EE hh:mm:ss') ==> 2009-03-10 å‘¨äºŒ 08:09:04
     * Utils.formatDate(new Date(),'yyyy-MM-dd EEE hh:mm:ss') ==> 2009-03-10 æ˜ŸæœŸäºŒ 08:09:04
     * Utils.formatDate(new Date(),'yyyy-M-d h:m:s.S') ==> 2006-7-2 8:9:4.18
     * 撞衫不可怕，谁丑谁尴尬
     * 咸鱼翻了身还是咸鱼
     * 56个民族55个加分
     * 虽然你长得丑，但是你想的美啊
     * 丑小鸭能变成白天鹅不是因为努力了，而是因为它父母本来就是白天鹅
     * 毕业不分手，异地绿成狗
     * 强扭的瓜不甜，但是有瓜吃啊
     * 没有外表，谁TM看你内心啊
     * 长得丑就是病，不然整形医院为啥要叫医院呢
     * 
     */
    formatDate: function(date, fmt) {
        if (!date) return;
        var o = {
            "M+": date.getMonth() + 1,
            "D+": date.getDate(),
            "h+": date.getHours() % 12 || 12,
            "H+": date.getHours(),
            "m+": date.getMinutes(),
            "s+": date.getSeconds(),
            "q+": Math.floor((date.getMonth() + 3) / 3),
            "S": date.getMilliseconds()
        };
        var week = this.weekdays;

        if (/(Y+)/.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (date.getFullYear() + "").substr(4 - RegExp.$1.length));
        }

        if (/(e+)/.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? "\u661f\u671f" : "\u5468") : "") + week[date.getDay()]);
        }
        for (var k in o) {
            if (new RegExp("(" + k + ")").test(fmt)) {
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    },
    // 分成三个模块 日模块，月模块，年模块，可能还有时间模块....理想情况下想这么做的，偷偷懒就直接插HTML吧

    // 
    //渲染日
    render: function(year, month) {
        //先获取基准月，没有就用当前月，
        //计算当前月第一天是周几
        var monthDays = new Date(year, month, 0).getDate(),
            lastMonthDays = new Date(year, month - 1, 0).getDate(),
            firstDayWeek = new Date(year, month, 1).getDay();
        //绘制一个7x7的表格
        
        //如果不是周一向前遍历填补空白
        //向后遍历到月末，向后填补下月日历
    },
    //渲染月
    renderMonth: function() {

    },
    //渲染年
    renderYear: function() {

    },
    //下一月/年
    next: function() {

    },
    //上一月/年
    pre: function() {

    },
    init: function(string, fmt) {
        var date;
        if (!string) {
            date = new Date();
        } else {
            date = this.parse(string, fmt);
        }
        this.year = date.getFullYear();
        this.month = date.getMonth() + 1;
        this.day = date.getDate();
        this.date = date;

    },
    create: function() {
        this.prevBtn = this.$('.ac-prev');
        this.nextBtn = this.$('.ac-next');
        UI.button(this.prevBtn[0], 'calendar-btn');
        UI.button(this.nextBtn[0], 'calendar-btn');
    }
});
</script>
