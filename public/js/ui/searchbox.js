define("js/ui/searchbox",[],function(e,t,i){$.fn.searchbox=function(e){if(1!=this.length)return this;var t,i;return UI($.extend({value:"",el:this,cls:"searchbox",placeholder:"",delay:500,events:{},search:$.noop,focus:$.noop,input:$.noop,init:function(){var e=this;if(e.el.attr("tabindex",-1).addClass(e.cls).html('<input value="'+e.value+'" class="text" placeholder="'+e.placeholder+'"><i class="i i-cancel am-rotate"></i>'),e.filter){e.events["click .ac-filter"]=function(i,l){return t=l.filter[$(this).attr("index")],e.tip.html('<i class="f f-search m2"></i>'+t.label),l.el.css("padding-left",e.tip.outerWidth()+10),e.tip.dropdown("hide"),!1};var l="";_.each(this.filter,function(e,t){l+='<li><a index="'+t+'" href="#" class="ac-filter '+e.cls+'">'+e.label+"</a></li>"}),e.tip=$('<a href="#" class="search-filter" data-dropdown></a>').prependTo(e.el),e.dropdown=$('<div class="dropdown noshadow"  position="left top,left-1 bottom"><ul class="menu">'+l+"</ul></div>").insertAfter(e.tip)}var a=e.el.find("input"),n=a.next().click(function(){$(this).hide(),a.val("").focus(),a.trigger("input"),e.search.call(a,"",t)});(i=e.value)&&n.show();var s=function(t,l,a){i!==l&&(e.input.call(t,l,a),i=l)};e.delay&&(s=_.throttle(s,e.delay,{leading:!1})),a.on("input",function(){var e=$.trim(this.value);s(a,e,t),n.toggle(!!e)}).on("keyup",function(i){"13"==i.keyCode&&e.search.call(a,this.value,t)}).focus(function(){e.el.addClass("searchbox-focus"),e.focus(!0)}).blur(function(){e.el.removeClass("searchbox-focus"),e.focus()})},create:function(){this.filter&&this.dropdown.find("a:eq(0)").click()}},e)),this}});