define("js/ui/notify",[],function(t,i,o){"use strict";var e={tll:{my:"right bottom",at:"left top-7",tip:"br"},tl:{my:"left bottom",at:"left top-7",tip:"bll"},tc:{my:"center bottom",at:"center top-7",tip:"b"},tr:{my:"right bottom",at:"right top-7",tip:"brr"},trr:{my:"left bottom",at:"right top-7",tip:"bl"},rtt:{my:"left bottom",at:"right+7 top",tip:"lb"},rt:{my:"left top",at:"right+7 top",tip:"ltt"},rc:{my:"left center",at:"right+7 center",tip:"l"},rb:{my:"left bottom",at:"right+7 bottom",tip:"lbb"},rbb:{my:"left top",at:"right+7 bottom",tip:"lt"},bll:{my:"right top",at:"left bottom+7",tip:"tr"},bl:{my:"left top",at:"left bottom+7",tip:"tll"},bc:{my:"center top",at:"center bottom+7",tip:"t"},br:{my:"right top",at:"right bottom+7",tip:"trr"},brr:{my:"left top",at:"right bottom+7",tip:"tl"},ltt:{my:"right bottom",at:"left-7 top",tip:"rb"},lt:{my:"right top",at:"left-7 top",tip:"rtt"},lc:{my:"right center",at:"left-7 center",tip:"r"},lb:{my:"right bottom",at:"left-7 bottom",tip:"rbb"},lbb:{my:"right top",at:"left-7 bottom",tip:"rt"}},l=function(t){t=_.extend({msg:"",cls:"dark"},t),t.id=t.id||_.uniqueId("tips_");var i=$("#"+t.id),o=_.create(e[t.dir||t.of.data("dir")||"tc"],{id:t.id,of:t.of,collision:"none",within:t.within});return i.length||(i=$("<div>",{id:t.id,style:"position:absolute;top:300px;left:700px;"}).appendTo(t.within||"body")),i[0].className="tips "+t.cls,t.timeout&&setTimeout(function(){i.remove()},1e3*t.timeout),i.html(t.msg+'<b class="tip tip-'+o.tip+'"></b>'+(t.closeable?'<i class="f f-multiply m4 am-rotate" onclick="$(this).parent().remove();"></i>':"")).show().position(o)},n=_.dot('{{?it.type=="dialog"}}{{?it.closeable!==false}}<i class="f f-multiply dialog-close am-rotate"></i>{{?}}<div class="dialog-title">{{=it.icon}}{{=it.title}}</div><div class="dialog-con">{{=it.msg}}</div>{{?it.buttons}}<div class="dialog-foot">{{~it.buttons :v:i}}<{{=v.tag||"b"}} class="b xr m4 {{=v.cls||"log"}}"{{?v.click}} click="{{=i}}"{{?}}>{{=v.label}}</{{=v.tag||"b"}}>{{~}}</div>{{?}}{{??}}{{=it.icon}}<span class="notify-con">{{=it.msg}}</span>{{?it.closeable}}<i class="f f-multiply notify-close am-rotate"></i>{{?}}{{?}}'),a={cls:"log",type:"notify",icon:"",title:"",msg:"",timeout:0,shadow:!0,template:n,events:{},draggable:!1,mask:!1,onclose:$.noop,oninit:$.noop,oncreate:$.noop,close:function(t,i){i=i||this,t&&t.stopPropagation&&t.stopPropagation(),t!==!0&&i.onclose(t,i),i.close=$.noop,i.el.remove(),delete i.el,i.mask&&(i.mask.remove(),delete i.mask)},position:{at:"center center-40",my:"center",using:function(t){t.top<10&&(t.top=10),$(this).css(t)},of:window},init:function(){var i=this,o="dialog"===i.type;i.oninit.apply(i),i.buttons&&i.buttons.reverse(),(i.buttons||i.title)&&(i.type="dialog",o=!0),i.anime=i.anime?i.anime:"am-fadeup";var l="click ."+i.type+"-close";i.events[l]=i.events[l]||"close",i.shadow===!1&&(i.cls+=" noshadow"),i.id&&i.el.attr("id",i.id),i.el.addClass(i.cls+" "+i.type+" "+i.anime).html(i.template(i)).data("_notify_",i),i.contentEl=i.$(">."+i.type+"-con"),i.width&&i.el.css("width",i.width),i.height&&i.contentEl.css("height",i.height).addClass("scroll"),i.buttons&&i.el.find(">.dialog-foot .b[click]").on("click",function(t){var o=$(this).attr("click"),e=i.buttons[o];o=e.click,_.isString(o)?i[o](t,i,e):o.call(this,t,i,e)});var n=i.mask;(n||o)&&(i.mask=$('<div class="mask'+(n===!0?" glass":"")+'"/>').appendTo("body")),i.el.appendTo(i.mask||"body"),i.oncreate.apply(i);var a=i.position;if(i.tips){_.isString(i.tips)&&(i.tips={dir:i.tips});var s=e[i.tips.dir];s&&(i.tips.of&&(a=_.extend(i.tips,s,{collision:"none"})),i.tips.el?i.tips.el.attr("class","tip tip-"+s.tip):i.tips.el=$('<b class="tip tip-'+s.tip+'"></b>').appendTo(i.el.addClass("tips")))}i.el.position(a),i.timeout&&(i.timer=setTimeout(function(){i.close()},1e3*i.timeout)),i.draggable&&t.async("draggable",function(){i.el.draggable({handle:o?">.dialog-title":"",drag:function(t,i){i.position.top<0&&(i.position.top=0)}})})}},s=function(t){if(t.id){var i=$("#"+t.id);if(i.length)return i.data("_notify_")}return t=_.extend(_.create(a),t),UI(t)};_.extend(s,{tips:l,loading:function(t){return this(_.extend({icon:'<i class="i i-loading m2"></i>',cls:"nobg noshadow",mask:1},t))},confirm:function(t){return t.test?void(t.callback&&t.callback(!0)):this(_.extend({icon:'<i class="mr f f-warn"></i>',mask:!0,title:"请确认",buttons:[{label:'<i class="f mr f-checkmark"></i>确定',cls:"note",click:"doComfirm"},{label:"取消",click:"doComfirm"}],doComfirm:function(i,o,e){t.callback&&t.callback(!!e.cls),o.close(i,o)},create:function(){this.contentEl.css("padding",20)}},t))},clear:function(t){$(".notify").each(function(){var i=$(this).data("_notify_");i&&i.close(t)})}});var c="info bell warn tool checkmark".split(" ");return _.each(["info","note","warn","error","safe"],function(t,i){s[t]=function(o,e){return _.isString(o)&&(o={msg:o}),this(_.extend({cls:t,icon:'<i class="m2 f-lg f f-'+c[i]+'"></i>',timeout:e||2},o))}}),s});