!function(e){"use strict";if(!window.UI){var t=function(t){return t.$=function(t){return e(t,this.el)},t.el=e(t.el||"<div/>"),t.init&&t.init(),_.each(t.events,function(n,i){var a=i.indexOf(" ");t.el.on(-1==a?i:i.slice(0,a),-1==a?"":e.trim(i.slice(a+1)),function(e){var i=_.isString(n)?t[n]:n;return i?i.call(this,e,t):void 0})}),t.create&&t.create(),t},n={webkit:"webkitHidden"in document,ms:"msHidden"in document,moz:"mozHidden"in document,ie:window.ActiveXObject?window.atob?10:document.addEventListener?9:document.querySelector?8:window.XMLHttpRequest?7:6:void 0,chrome:!!window.chrome&&window.chrome.webstore,firefox:!!window.sidebar&&!!window.sidebar.addSearchEngine,safari:/constructor/i.test(window.HTMLElement)};if(_.extend(t,{illegalCharacter:/[^\\\/:\*\?\"<>\|]/,count:15,server:seajs.data.base,browser:n}),_.mixin({guid:function(e){var t,n=_.now().toString(32);for(t=0;5>t;t++)n+=Math.floor(65535*Math.random()).toString(32);return n+=_.uniqueId().toString(32),e?e+n:n},dot:doT.template,queryString:function(t,n,i){var a={};if("string"!=typeof t||0===e.trim(t).length)return a;t=e.trim(t).replace(/^\?+/,"");var o,r,s,c,u=t.split(n||"&"),d=/^(\w+)\[\]$/;i=i||"=";for(var l=0;l<u.length;l++)o=u[l].split(i),r=decodeURIComponent(e.trim(o[0])),s=decodeURIComponent(e.trim(o.slice(1).join(i))),c=r.match(d),c&&c[1]&&(r=c[1]),a.hasOwnProperty(r)?(_.isArray(a[r])||(a[r]=[a[r]]),a[r].push(s)):a[r]=c?[s]:s;return a}}),n.ie<10){var i=function(e){return"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName},a=_.uniqueId(".ieinputFixed");e.event.special.input={setup:function(){if(!i(this))return!1;var t=this,o=this.value,r=function(){o!==t.value&&(o=t.value,e.event.trigger("input",null,t))},s=e(document);(9==n.ie||8==n.ie)&&e(t).on("focus"+a,function(){s.on("selectionchange"+a,r)}).on("blur"+a,function(){s.off("selectionchange"+a,r)}),8==n.ie&&e(t).on("keyup"+a,r),t.attachEvent("onpropertychange",e.data(t,a,function(e){"value"==e.propertyName.toLowerCase()&&r()}))},teardown:function(){return i(this)?((9==n.ie||8==n.ie)&&e.event.remove(this,a),this.detachEvent("onpropertychange",e.data(this,a)),void e.removeData(this,a)):!1}}}e.fn.input=function(e){return this.on("input",e)},e.fn.serializeObject=function(t){var n,i,a,o=this.serializeArray(),r={};return _.each(o,function(o){n=r[o.name],i=t?e.trim(o.value):o.value,n!==a?_.isArray(n)?n.push(i):r[o.name]=[n,i]:r[o.name]=i}),r},t.loader=function(t){return t=e.extend({baseparams:{},beforeLoad:e.noop,afterLoad:e.noop,load:function(n){this.url&&(this.xhr&&this.xhr.abort(),n&&(this.filter=n,this.count&&(this.page=n.page||1)),this.beforeLoad(n),this.xhr=e.ajax({url:this.url,type:this.loadtype,loadtip:this.loadtip,data:e.extend({},this.baseparams,{page:this.page,count:this.count},this.filter),cache:this.cache,dataType:"JSON",success:function(e){t.afterLoad(e)}}))}},t),t.count&&!t.page&&(t.page=1),t};var o=["log","silver","note","info","safe","warn","care","error","link","dark"],r=function(n,i){var a=e(n);return void 0===a.data("btype")&&(i=i||_.find(o,function(e){return a.hasClass(e)}),i&&(a.addClass(i+"-hover"),a.mouseenter(function(){a.addClass(i+"-hover")}).mouseleave(function(){a.removeClass(i+"-hover")}).mousedown(function(o){1===o.which&&(a.hasClass("active")||(o.preventDefault(),a.addClass(i+"-active"),e(document).one("mouseup",function(){a.removeClass(i+"-active"),t.browser.ie<8&&n.blur()})))})),a.data("btype",i)),a};e(document).on("mouseenter",".b."+o.join(",.b."),function(){r(this)}).on("click",'a[href="#"]',function(e){e.preventDefault()}),t.tabs=function(n){return t(e.extend(!0,{active:function(e){this.tabs.find("a:eq("+e+")").trigger("click")},onActive:e.noop,cache:{},getPanel:function(t){var n,i=t.getAttribute("panel"),a=this.cache;if(i){if(a[i])return a[i];if(n=0===i.indexOf("#")?e(i):this.el.children(i),n.length)return a[i]=n}},events:{"click >.tab a":function(t,n){if(this!=n.tab){var i=this,a=e(i),o=n.getPanel(this);o&&(n.tabs.find("a").each(function(e,t){if(t!==i){var a=n.getPanel(t);a&&a.hide()}}),o.show(),a.parent().addClass("active").siblings().removeClass("active"),n.tab=i,n.panel=o,n.onActive(i,o),t.preventDefault())}}},init:function(){this.tabs=this.el.children(".tab")},create:function(){this.active(0)}},n))},t.navs=function(n){return t(e.extend(!0,{events:{"click a":function(e,t){var n=t.isCart(e,this);return n?(t.toggle(this),!1):t.onClick(this)===!1?!1:void 0},"dblclick a":function(e,t){return t.isCart(e,this)||t.toggle(this),!1}},isCart:function(t,n){var i=e(t.target).hasClass("nav-cart");return i||(i=e(n).attr("href"),i=void 0===i||""===i||"#"===i),i},active:function(e){return e.jquery||(e=this.$(e)),this.$("a").removeClass("active"),e.addClass("active")},toggle:function(t,n,i){var a=e(t),o=this.openCls,r=a.hasClass(o);i=void 0===i?this.speed:i,0===a.length||n===!0&&r||0==a.next().length||(r||0==n?(a.removeClass(o).next().slideUp(i),this.onCollapse(a)):(a.addClass(o).next().slideDown(i),this.accordion&&this.toggle(a.parent().siblings().find(">."+this.openCls),!1),this.onExpand(a)))},speed:"fast",accordion:!1,openCls:"nav-open",cartCls:"f f-down",onExpand:e.noop,onCollapse:e.noop,onClick:e.noop,create:function(){this.el.addClass(this.cls).find("a+ul").prev().prepend('<b class="nav-cart '+this.cartCls+'"></b>')}},n))},window.UI=t,n.ie<10&&document.attachEvent("onpropertychange",function(e){"title"===e.propertyName&&document.title&&setTimeout(function(){var e=document.title.indexOf("#");-1!==e&&(document.title=document.title.slice(0,e))},1)}),e.ajaxSetup({cache:!1}),e(document).ajaxSend(function(t,n,i){var a=i.target;if(a){var o=e(a).data("_xhr_");o&&o.abort(),e(a).data("_xhr_",n),"BUTTON"==a.tagName&&(a.disabled=!0)}var r=i.loadtip;r&&seajs.use("ui/notify",function(e){i.loadtip&&(i.loadtip=e.loading("string"==typeof r?{msg:r}:r))})}).ajaxSuccess(function(n,i,a){var o=i.responseJSON;o&&!o.success&&20000006==o.data&&seajs.use("ui/notify",function(n){n.error("您还没有登录"),e.removeCookie("user",{path:"/"}),_.delay(function(){location=t.server+"login.html"},3e3)})}).ajaxComplete(function(t,n,i){var a=i.target;a&&"BUTTON"==a.tagName&&(a.disabled=!1,e(a).removeData("_xhr_"));var o=i.loadtip;o&&(i.loadtip=0,o.close&&o.close())}),function(){if(!window.console){var t=window.console={};_.each("assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd table time timeEnd timeStamp trace warn".split(" "),function(n){t[n]=e.noop})}}(),t.browser.ie<9&&_.each("abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video".split(" "),function(e){document.createElement(e)})}}(jQuery);