define("js/ui/notify.js",[],function(){"use strict";var a={tll:{my:"right bottom",at:"left top-7",tip:"br"},tl:{my:"left bottom",at:"left top-7",tip:"bll"},tc:{my:"center bottom",at:"center top-7",tip:"b"},tr:{my:"right bottom",at:"right top-7",tip:"brr"},trr:{my:"left bottom",at:"right top-7",tip:"bl"},rtt:{my:"left bottom",at:"right+7 top",tip:"lb"},rt:{my:"left top",at:"right+7 top",tip:"ltt"},rc:{my:"left center",at:"right+7 center",tip:"l"},rb:{my:"left bottom",at:"right+7 bottom",tip:"lbb"},rbb:{my:"left top",at:"right+7 bottom",tip:"lt"},bll:{my:"right top",at:"left bottom+7",tip:"tr"},bl:{my:"left top",at:"left bottom+7",tip:"tll"},bc:{my:"center top",at:"center bottom+7",tip:"t"},br:{my:"right top",at:"right bottom+7",tip:"trr"},brr:{my:"left top",at:"right bottom+7",tip:"tl"},ltt:{my:"right bottom",at:"left-7 top",tip:"rb"},lt:{my:"right top",at:"left-7 top",tip:"rtt"},lc:{my:"right center",at:"left-7 center",tip:"r"},lb:{my:"right bottom",at:"left-7 bottom",tip:"rbb"},lbb:{my:"right top",at:"left-7 bottom",tip:"rt"}},b=function(b){b=_.extend({msg:"",cls:"dark"},b),b.id=b.id||_.uniqueId("tips_");var c=$("#"+b.id),d=_.proto(a[b.dir||b.of.data("dir")||"tc"],{id:b.id,of:b.of,collision:"none",within:b.within});return c.length||(c=$("<div>",{id:b.id,style:"position:absolute;top:300px;left:700px;"}).appendTo(b.within||"body")),c[0].className="tips "+b.cls,b.timeout&&setTimeout(function(){c.remove()},1e3*b.timeout),c.html(b.msg+'<b class="tip tip-'+d.tip+'"></b>'+(b.closeable?'<i class="f f-multiply m4 am-rotate" onclick="$(this).parent().remove();"></i>':"")).show().position(d)},c=_.dot('{{?it.type=="dialog"}}{{?it.closeable!==false}}<i class="f f-multiply dialog-close am-rotate"></i>{{?}}<div class="dialog-title">{{=it.icon}}{{=it.title}}</div><div class="dialog-con">{{=it.msg}}</div>{{?it.buttons}}<div class="dialog-foot">{{~it.buttons :v:i}}<{{=v.tag||"b"}} class="b xr m4 {{=v.cls||"log"}}"{{?v.click}} click="{{=i}}"{{?}}>{{=v.label}}</{{=v.tag||"b"}}>{{~}}</div>{{?}}{{??}}{{=it.icon}}<span class="notify-con">{{=it.msg}}</span>{{?it.closeable}}<i class="f f-multiply notify-close am-rotate"></i>{{?}}{{?}}'),d={cls:"log",type:"notify",icon:"",title:"",msg:"",timeout:0,shadow:!0,template:c,events:{},draggable:!1,mask:!1,onclose:$.noop,oninit:$.noop,oncreate:$.noop,close:function(a,b){b=b||this,a&&a.stopPropagation&&a.stopPropagation(),a!==!0&&b.onclose(a,b),b.close=$.noop,b.el.remove(),delete b.el,b.mask&&(b.mask.remove(),delete b.mask)},position:{at:"center center-40",my:"center",using:function(a){a.top<10&&(a.top=10),$(this).css(a)},of:window},init:function(){var b=this,c="dialog"===b.type;b.oninit.apply(b),b.buttons&&b.buttons.reverse(),(b.buttons||b.title)&&(b.type="dialog",c=!0),b.anime=b.anime?b.anime:"am-fadeup";var d="click ."+b.type+"-close";b.events[d]=b.events[d]||"close",b.shadow===!1&&(b.cls+=" noshadow"),b.id&&b.el.attr("id",b.id),b.el.addClass(b.cls+" "+b.type+" "+b.anime).html(b.template(b)).data("_notify_",b),b.contentEl=b.$(">."+b.type+"-con"),b.width&&b.el.css("width",b.width),b.height&&b.contentEl.css("height",b.height).addClass("scroll"),b.buttons&&b.el.find(">.dialog-foot .b[click]").on("click",function(a){var c=$(this).attr("click"),d=b.buttons[c];c=d.click,_.isString(c)?b[c](a,b,d):c.call(this,a,b,d)});var e=b.mask;(e||c)&&(b.mask=$('<div class="mask'+(e===!0?" glass":"")+'"/>').appendTo("body")),b.el.appendTo(b.mask||"body"),b.oncreate.apply(b);var f=b.position;if(b.tips){_.isString(b.tips)&&(b.tips={dir:b.tips});var g=a[b.tips.dir];g&&(b.tips.of&&(f=_.extend(b.tips,g,{collision:"none"})),b.tips.el?b.tips.el.attr("class","tip tip-"+g.tip):b.tips.el=$('<b class="tip tip-'+g.tip+'"></b>').appendTo(b.el.addClass("tips")))}b.el.position(f),b.timeout&&(b.timer=setTimeout(function(){b.close()},1e3*b.timeout)),b.draggable&&b.el.draggable({handle:c?">.dialog-title":"",drag:function(a,b){b.position.top<0&&(b.position.top=0)}})}},e=function(a){if(a.id){var b=$("#"+a.id);if(b.length)return b.data("_notify_")}return a=_.extend(_.proto(d),a),UI(a)};_.extend(e,{tips:b,loading:function(a){return this(_.extend({icon:'<i class="i i-loading m2"></i>',cls:"nobg noshadow",mask:1},a))},confirm:function(a){return a.test&&a.callback&&a.callback(!0),this(_.extend({icon:'<i class="mr f f-warn"></i>',mask:!0,title:"请确认",buttons:[{label:'<i class="f mr f-checkmark"></i>确定',cls:"note",click:"doComfirm"},{label:"取消",click:"doComfirm"}],doComfirm:function(b,c,d){a.callback&&a.callback(!!d.cls),c.close(b,c)},create:function(){this.contentEl.css("padding",20)}},a))},clear:function(a){$(".notify").each(function(){var b=$(this).data("_notify_");b&&b.close(a)})}});var f="info bell warn tool checkmark".split(" ");return _.each(["info","note","warn","error","safe"],function(a,b){e[a]=function(c,d){return _.isString(c)&&(c={msg:c}),this(_.extend({cls:a,icon:'<i class="m2 f-lg f f-'+f[b]+'"></i>',timeout:d||2},c))}}),e});